- name: Astra test project
  hosts: all
  become: yes
  tasks:
    - name: install modules
      apt:
        pkg:
          - docker
          - docker-compose
          - prometheus-node-exporter
    - name: start docker containers
      community.docker.docker_compose:
        project_name: docker
        definition:
          version: "3.7"
          networks:
            local:
              driver: bridge
          services:
            prometheus:                 
              build:
                context: /tmp/prometheus
                dockerfile: Dockerfile
              container_name: prometheus
              hostname: prom
              networks: 
                - local
              ports:
                - "9090:9090"